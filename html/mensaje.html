<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/mensaje.css">
</head>
<body>
    <div class="container">
        <div class="header">
          <h2>Abel</h2>
          <a href="../index.html"><button class="exit-button"> Salir</button></a>
          
        </div>
        <div class="messages">
          <!-- aquí se mostrarían los mensajes -->
        </div>
        <form class="message-form">
          <input id="message-input" type="text" placeholder="Escribe tu mensaje aquí...">
          <button class="send-button"><img src="../img/mensaje.png" alt="" width="20" height="20"></button>
          <button class="delete-button">⌫</button>
        </form>
      </div>

<script type="text/javascript">
const messageForm = document.querySelector('.message-form');
const messageInput = document.querySelector('#message-input');
const messagesDiv = document.querySelector('.messages');

messageForm.addEventListener('submit', (event) => {
  event.preventDefault();

  const messageText = messageInput.value;
  const newMessage = document.createElement('p');
  newMessage.textContent = messageText;
  messagesDiv.appendChild(newMessage);
  messageInput.value = '';

  // Envía el mensaje al servidor
  fetch('/enviar_mensaje', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ message: messageText })
  });
});

// Carga los mensajes del servidor al iniciar la página
fetch('/ver_mensajes')
  .then(response => response.json())
  .then(messages => {
    messages.forEach(message => {
      const newMessage = document.createElement('p');
      newMessage.textContent = message;
      messagesDiv.appendChild(newMessage);
    });
  });
</script>
  </body>
</html>